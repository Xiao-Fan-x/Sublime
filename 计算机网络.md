## 时延

1.发送时延： 发送时延 = 数据帧长度 (bit) / 发送速率 (m/s)

2.传播时延： 传播时延 = 信道长度(m) / 电磁波在信道上的传输速率 (m/s)

3.处理时延

4.排队时延

总时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延

​ 一般说来，小时延的网络要优于大时延的网络。在某些情况下，一个低速率、 小时延的网络很可能要优于一个高速率但大时延的网络。

![image-20210702191507524](C:\Users\Xiao\AppData\Roaming\Typora\typora-user-images\image-20210702191507524.png)

​ 通常所说的“光纤信道的传输速率高”是指可 以用很高的速率向光纤信道发送数据，而光纤信道的传播速率实际上还要比铜线的 传播速率略低一点。

###### 时延带宽积： 时延带宽积 = 传播时延 * 带宽

![image-20210702224753376](C:\Users\Xiao\AppData\Roaming\Typora\typora-user-images\image-20210702224753376.png)

###### 往返时间RTT (Round-Trip Time)

​ 互联网上的信息不仅仅单方向传输而是双向交互的。 因此，我们有时很需要知道双向交互一次所需的时间。

发送时间 = 数据长度 / 发送速率

有效数据率 = 数据长度 / （发送时间 + RTT）


① 客户端发起一个 HTTPS 请求，并连接到服务器的 443 端口，发送的信息主要包括自身所支持的算法列表和密钥长度等；
② 服务端将自身所支持的所有加密算法与客户端的算法列表进行对比并选择一种支持的加密算法，然后将它和其它密钥组件一同发送给客户端。
③ 服务器向客户端发送一个包含数字证书的报文，该数字证书中包含证书的颁发机构、过期时间、服务端的公钥等信息。
④ 最后服务端发送一个完成报文通知客户端 SSL 的第一阶段已经协商完成。
⑤ SSL 第一次协商完成后，客户端发送一个回应报文，报文中包含一个客户端生成的随机密码串，称为 pre_master_secre，并且该报文是经过证书中的公钥加密过的。
⑥ 紧接着客户端会发送一个报文提示服务端在此之后的报文是采用pre_master_secre 加密的。
⑦ 客户端向服务端发送一个 finish 报文，这次握手中包含第一次握手至今所有报文的整体校验值，最终协商是否完成取决于服务端能否成功解密。
⑧ 服务端同样发送与第 ⑥ 步中相同作用的报文，已让客户端进行确认，最后发送 finish 报文告诉客户端自己能够正确解密报文。

当服务端和客户端的 finish 报文交换完成之后，SSL 连接就算建立完成了，之后就进行和 HTTP 相同的通信过程，唯一不同的是在 HTTP 通信过程中并不是采用明文传输，而是采用对称加密的方式，其中对称密钥已经在 SSL 的建立过程中协商好了。
